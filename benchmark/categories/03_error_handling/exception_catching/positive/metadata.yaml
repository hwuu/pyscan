# Exception Catching Positive Examples

bugs:
  # Example 2: Exception type errors
  - id: "EXC-CATCH-001"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "medium"
    type: "OverBroadException"
    file: "example2_exception_type.py"
    function: "parse_config"
    location:
      start_line: 17
      end_line: 17
      start_col: 4
      end_col: 21
    description: "捕获过于宽泛的 Exception,会掩盖 KeyboardInterrupt 等系统异常"
    root_cause: "应该捕获具体的 json.JSONDecodeError"
    cwe_id: "CWE-396"
    difficulty: "medium"
    related_bugs: ["BUG_0008"]

  - id: "EXC-CATCH-002"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "high"
    type: "WrongExceptionType"
    file: "example2_exception_type.py"
    function: "divide_numbers"
    location:
      start_line: 30
      end_line: 30
      start_col: 4
      end_col: 22
    description: "捕获了错误的异常类型 ValueError,实际应该捕获 ZeroDivisionError"
    root_cause: "异常类型不匹配"
    cwe_id: "CWE-396"
    difficulty: "easy"
    related_bugs: ["BUG_0008"]

  - id: "EXC-CATCH-003"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "medium"
    type: "IncompleteExceptionHandling"
    file: "example2_exception_type.py"
    function: "read_integer_from_file"
    location:
      start_line: 44
      end_line: 46
      start_col: 8
      end_col: 30
    description: "只捕获了 ValueError,但可能抛出 FileNotFoundError, IOError 等"
    root_cause: "异常处理不完整"
    cwe_id: "CWE-755"
    difficulty: "medium"
    related_bugs: ["BUG_0008"]

  - id: "EXC-CATCH-004"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "high"
    type: "BareExcept"
    file: "example2_exception_type.py"
    function: "process_user_input"
    location:
      start_line: 61
      end_line: 61
      start_col: 4
      end_col: 11
    description: "使用裸 except: 会捕获所有异常,包括 KeyboardInterrupt"
    root_cause: "裸 except 违反最佳实践"
    cwe_id: "CWE-396"
    difficulty: "easy"
    related_bugs: ["BUG_0008"]

  - id: "EXC-CATCH-005"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "medium"
    type: "SilentException"
    file: "example2_exception_type.py"
    function: "save_important_data"
    location:
      start_line: 85
      end_line: 86
      start_col: 4
      end_col: 12
    description: "except 仅 pass，完全吞掉异常，无任何处理或日志"
    root_cause: "数据保存失败但程序继续运行，用户误以为操作成功"
    cwe_id: "CWE-391"
    difficulty: "easy"
    related_bugs: []
    detection_layer: "Layer 1"

  - id: "EXC-CATCH-006"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "medium"
    type: "UnloggedException"
    file: "example2_exception_type.py"
    function: "fetch_critical_config"
    location:
      start_line: 103
      end_line: 105
      start_col: 4
      end_col: 20
    description: "异常捕获后未记录日志，直接返回 None，生产环境问题难以排查"
    root_cause: "配置加载失败但无日志记录"
    cwe_id: "CWE-391"
    difficulty: "easy"
    related_bugs: []
    detection_layer: "Layer 1"

  - id: "EXC-CATCH-007"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "critical"
    type: "CatchingBaseException"
    file: "example2_exception_type.py"
    function: "critical_operation"
    location:
      start_line: 125
      end_line: 125
      start_col: 4
      end_col: 26
    description: "捕获 BaseException，会拦截 SystemExit 和 KeyboardInterrupt"
    root_cause: "使用 BaseException 而不是 Exception，导致程序无法正常退出"
    cwe_id: "CWE-396"
    difficulty: "medium"
    related_bugs: []
    detection_layer: "Layer 1"

  - id: "EXC-CATCH-008"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "low"
    type: "RedundantExceptBranch"
    file: "example2_exception_type.py"
    function: "redundant_exception_handling"
    location:
      start_line: 148
      end_line: 148
      start_col: 4
      end_col: 25
    description: "多余的 except 分支（死代码），ValueError 已被 Exception 捕获"
    root_cause: "except 顺序错误，子类异常永远不会被执行"
    cwe_id: "CWE-561"
    difficulty: "easy"
    related_bugs: []
    detection_layer: "Layer 1"

  - id: "EXC-CATCH-009"
    category: "error_handling"
    subcategory: "exception_catching"
    severity: "medium"
    type: "WrongExceptionOrder"
    file: "example2_exception_type.py"
    function: "wrong_exception_order"
    location:
      start_line: 171
      end_line: 171
      start_col: 4
      end_col: 23
    description: "except 顺序错误，父类 OSError 先于子类 FileNotFoundError"
    root_cause: "应该先捕获具体异常（子类），再捕获一般异常（父类）"
    cwe_id: "CWE-484"
    difficulty: "medium"
    related_bugs: []
    detection_layer: "Layer 2"
